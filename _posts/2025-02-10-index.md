---
title: "📋 인덱스란"
date: 2025-02-10 10:30 +0900
categories: [Database]
tags: [Index, B-Tree]
---

> 인덱스는 '색인'이라는 뜻으로 책의 맨 앞과 끝에 있는 목차와 찾아보기로 비유되곤 합니다. 어떤 항목을 찾을 때 목차에서 찾아보고 해당 페이지로 넘어가면 빠르게 찾을 수 있습니다. 데이터베이스에서도 인덱스라는 개념이 있습니다. 인덱스를 활용하면 데이터에 책의 색인처럼 동작하며 빠른 검색을 가능하게 합니다. 이 글에서는 데이터베이스의 인덱스의 개념과 구조, 장단점 등에 대해서 알아보겠습니다. 

## 인덱스란?

데이터베이스에서 `인덱스(index)`는 테이블의 검색 속도를 향상시키기 위해 사용되는 자료 구조입니다. 특정 컬럼 값을 기준으로 데이터의 물리적 위치를 매핑하여 검색 효율을 높이는 역활을 합니다.

![index_introduction.png]((https://github.com/Euihyunee/euihyunee.github.io/blob/main/_posts/img/index_introduction.png?raw=true))

데이터베이스에서는 많은 데이터가 있을 수록 데이터를 찾기 위해 자원이 많이 소모됩니다. 즉, 데이터가 많을 수록 실행 결과 속도에 차이가 있습니다. 여기서 인덱스라는 기술을 사용하여 이 속도를 증가시킬 수 있습니다.

## 인덱스의 구조 

인덱스 구조 중 가장 많이 사용되는 것은 `B-Tree 인덱스`, 특히 그 변형인 `B+Tree 인덱스`입니다. 대부분의 데이터베이스 관리 시스템에서 기본적으로 사용되며, 효율적인 데이터 검색과 정렬을 제공합니다.

### B-Tree 인덱스 구조 

B-Tree(Balanced Tree) 자료구조는 이진 탐색 트리를 확장하여 더 많은 자식 노드를 가질 수 있도록 설계되었습니다. 각 노드는 여러 개의 키와 자식 노드를 가질 수 있으며 노드 내의 키들은 항상 정렬된 상태로 유지됩니다. B-Tree 인덱스는 B-Tree 자료구조를 사용한 구조입니다.

![index_btree.png]((https://github.com/Euihyunee/euihyunee.github.io/blob/main/_posts/img/index_btree.png?raw=true))


1. **Root 노드**: 인덱스의 최상위 노드로, 전체 구조의 시작점입니다.
2. **Branch 노드**: Root와 Leaf 사이에 위치하며, 하위 노드로의 경로를 제공합니다.
3. **Leaf 노드**: 실제 데이터의 위치를 가리키는 포인터와 함께 인덱스 키 값을 저장합니다.

조회하는 과정은 루트 노드에서 시작하여 찾고자 하는 키 값을 비교하여 적절한 자식 노드를 선택합니다. 선택된 자식 노드로 이동하여 리프 노드에 도달할 때까지 반복합니다. 리프 노드에 도달하면 연관된 데이터 레코드에 접근합니다.

이 과정을 통해 B-Tree 인덱스는 O(log n) 시간 복잡도로 효율적인 검색을 수행할 수 있습니다. 각 레벨에서 한 노드만 방문하므로, 트리의 높이가 낮을수록 검색 속도가 빨라집니다. 

### 다른 인덱스 종류

- 해시(Hash) 인덱스:  
    - 해시 함수를 사용하여 키를 특정 버킷에 매핑
    - 등호(=) 검색에 매우 빠름 (O(1) 시간 복잡도)
    - 범위 검색이나 정렬에는 부적합
    주로 메모리 기반 데이터베이스에서 사용
- 비트맵(Bitmap) 인덱스
    - 각 고유 값에 대해 비트 벡터를 사용
    - 카디널리티가 낮은(고유 값이 적은) 컬럼에 효과적
    - 복잡한 조건을 가진 쿼리에서 여러 인덱스를 결합하는 데 유용
    주로 데이터 웨어하우스나 OLAP 시스템에서 사용
- 함수 기반(Function-based) 인덱스
    - 컬럼 값에 함수나 표현식을 적용한 결과에 대한 인덱스
    - WHERE 절에서 함수나 표현식이 사용될 때 유용
    - 계산된 값에 대한 빠른 검색 가능
    - DML 작업 시 추가적인 부하가 발생할 수 있음
- 전문 검색(Full-text) 인덱스
    - 텍스트 문서의 내용을 효율적으로 검색하기 위한 인덱스
    - 키워드 검색, 자연어 검색 등에 사용
    - 불용어 제거, 어근 분석 등의 기법 사용
    - 대량의 텍스트 데이터를 다루는 애플리케이션에서 유용 

## 인덱스의 장단점

데이터베이스 인덱스는 검색 성능을 향상시키는 중요한 도구이지만, 장단점을 모두 가지고 있습니다.

### 장점

1. 검색 속도 향상:  
인덱스의 가장 큰 장점은 데이터 검색 속도를 크게 향상시킨다는 것입니다. 인덱스를 사용하면 데이터베이스는 전체 테이블을 스캔하지 않고도 원하는 데이터를 빠르게 찾을 수 있습니다.
2. 정렬 및 그룹화 성능 개선:  
인덱스는 데이터를 정렬된 상태로 유지하므로 ORDER BY, GROUP BY절을 사용하는 쿼리의 성능을 향상시킵니다.
3. 데이터 무결성 유지:  
인덱스는 중복 데이터를 방지하거나 특정 컬럼의 유일성(Unique)을 보장하는 데 도움을 줍니다.

### 단점

1. 추가 저장 공간 필요:  
인덱스는 별도의 데이터 구조로 저장되므로 추가적인 디스크 공간을 사용합니다. 일반적으로 테이블 크기의 약 10% 정도의 추가 공간이 필요할 수 있습니다.
2. 데이터 수정 작업 성능 저하:  
INSERT, UPDATE, DELETE 등의 데이터 수정 작업 시 인덱스도 함께 업데이트해야 하므로 이러한 작업의 성능이 저하될 수 있습니다.
3. 인덱스 관리의 복잡성:  
적절한 인덥스 선택과 관리는 데이터베이스 성능에 큰 영향을 미치므로 DBA의 역활이 중요해집니다. 너무 많은 인덱스는 오히려 DBNS의 성능을 저하시킬 수 있습니다.
4. 인덱스 생성 시간:  
데규모 테이블에 인덱스를 생성할 때 상당한 시간이 소요될 수 있습니다.

### 그럼에도 인덱스를 사용하는 이유 

RDBMS에서 Index는 필수라고 생각하시면 됩니다. 웹 서비스의 데이터베이스에서 조회(SELECT) 즉, 읽기 작업이 쓰기 작업보다 압도적으로 많은 비중을 차지합니다. 때문에 인덱스를 이용하여 조회의 시스템 부하를 감소시켜 같은 시간 내에 더 많은 업무 처리가 가능해집니다. 일부 작업의 성능 저하를 감수하더라도 시스템 성능과 사용자 경험을 크게 향상시킬 수 있습니다. 다만, 신중한 설계와 지속적인 모니터링을 통해 최적의 성능을 유지하는 것이 중요합니다.

## 마치며 

여기까지 인덱스의 개념, 구조, 장단점 등에 대해 알아보았습니다. 데이터베이스에서 인덱스는 성능 최적화의 강력한 도구입니다. 하지만 인덱스를 도입하기 전에 신중한 설계와 관리가 필요합니다. 

자주 검색되는 컬럼에 인덱스를 생성하고, 인덱스의 개수를 제한하고, 읽기 작업이 많은 환경인지 확인해야 합니다. 인덱스를 도입한 이후에 정기적인 모니터링을 통해 인덱스를 조정하는 작업을 통해 시스템의 전반적인 성능과 사용자 경험을 크게 향상시킬 수 있습니다.

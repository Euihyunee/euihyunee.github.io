---
title: "💬 IP 주소체계와 서브넷팅, NAT"
date: 2025-02-21 16:20 +0900
categories: [CS]
tags: [Network, IPv4, Subnet, NAT]
---

![IPv4_Subneting_NAT.png](https://github.com/Euihyunee/euihyunee.github.io/blob/main/_posts/img/IPv4_Subneting_NAT.png?raw=true)

> 개발자에게 IP 주소 관리에 대한 이해는 더 안전하고 효율적인 네트워크 기반 애플리케이션을 개발할 수 있습니다. 또한 네트워크 관련 문제에 대해 더 빠르고 정확하게 대응할 수 있습니다. 서비스의 성능을 향상시킬 수 있고, 비용 절감으로도 이어지는 IP 주소 관리의 기본인 IP 주소체계와 서브넷팅, NAT에 대해 설명하겠습니다.

## IP 주소란?

IP 주소는 인터넷에 연결된 모든 장치에 할당된 유일한 식별 번호입니다. 유일하기 때문에 호스트와 네트워크 인터페이스를 식별 가능하며, 네트워크 인프라 내에서 디바이스의 위치를 지정할 수 있습니다. 위치를 지정할 수 있으니 데이터 패킷을 의도한 목적지로 경로를 설정하는 라우팅이 가능해집니다.

IP 주소는 인터넷에 연결된 모든 장치를 고유하게 식별하는 32비트(IPv4), 128비트(IPv6) 숫자입니다. 일반적으로 IPv4를 사용하며 이는 점으로 구분된 4개의 8비트 그룹으로 표현됩니다.  
> ex) 192.168.11

OSI 모델에서는 네트워크 계층(3계층)이 IP 주소가 중요한 역활을 가집니다. OSI 모델에서는 네트워크 계층에서 IP 주소를 가지고 패킷의 라우팅과 주소 지정을 담당할 수 있습니다. 또한 서로 다른 네트워크 간에 호스트를 식별하는 논리적 주소로 사용할 수 있습니다.  

### IP 주소의 특징

- 네트워크 식별: IP 주소는 네트워크 ID와 호스트 ID로 구성되어 있어 네트워크와 특정 장치를 식별할 수 있습니다. 

- IPv4 주소 체계: 32비트로 구성되며, 일반적으로 점으로 구분된 4개의 8비트 그룹(0~255)으로 표현됩니다. 
- IPv6 주소 체계: 128비트로 구성되며, 콜론으로 구분된 8개의 16진수 그룹으로 표현됩니다. 거의 무한대에 가까운 주소를 제공하여 주소 고갈 문제를 해결하지만 인프라, 기술 복잡성 등의 문제로 도입이 더딘 상황입니다.
- 라우팅: IP 주소는 데이터 패킷이 목적지로 라우팅되는 데 사용됩니다.

📋추가로 IP 주소에는 인터넷에서 직접 접근 가능한 공인 IP와 내부 네트워크에서만 사용하는 사설 IP가 있습니다. IP 주소를 공인과 사설로 나누는 이유는 다음과 같습니다.

1. IPv4 주소 부족 문제 해결  
IPv4 주소 체계는 약 43억 개의 고유 주소만을 제공합니다. 전 세계의 모든 기기에 고유한 공인 IP 주소를 할당하기에는 모자라기에 사설 IP를 사용함으로써 제한된 공인 IP 주소를 효율적으로 관리할 수 있습니다.
2. 비용 절감  
모든 기기에 공인 IP를 할당하는 것은 비용이 많이 듭니다. 사설 IP를 사용하면 하나의 공인 IP로 여러 기기가 인터넷에 접속할 수 있어 비용을 절감할 수 있습니다.
3. 보안 강화  
사설 IP는 외부에서 직접 접근할 수 없어 내부 네트워크의 보안을 강화합니다. `NAT`(Network Address Translation) 기술을 통해 내부 네트워크를 외부로부터 보호할 수 있습니다.
4. 네트워크 관리 용이성  
사설 IP를 사용하면 내부 네트워크를 더 효과적으로 관리할 수 있습니다. 기업이나 조직은 자체적인 IP 주소 체계를 구축하여 네트워크를 구조화하고 관리할 수 있습니다.
5. 유연한 네트워크 구성  
사설 IP를 사용하면 내부 네트워크를 필요에 따라 서브넷으로 분리하거나 재구성할 수 있어 네트워크 구성의 유연성이 높아집니다.

## 서브넷(Subnet)이란?

IP 주소 체계에 설명하기 이전에 서브넷 개념에 대해 설명하겠습니다.  IPv4는 초기에 A,B,C 클래스로 나누어 IP주소를 할당했습니다. 

> - 클래스 A: 0.0.0.0 ~ 127.255.255.255 (국가 단위)
> - 클래스 B: 128.0.0.0 ~ 191.255.255.255 (기업 단위)
> - 클래스 C: 192.0.0.0 ~ 223.255.255.255 (조직 단위)

이 방식은 IP 주소 공간의 비효율적 사용을 초래했습니다. 예를 들어, 중소기업에 B 클래스를 할당하면 65,000개 이상의 IP 주소 중 대부분이 낭비될 수 있었습니다. 이런 문제로 효율적 IP 사용의 필요성을 느꼈습니다.  네트워크 관리자들은 할당된 IP 주소 범위를 더 작은 단위로 분할하여 IP 주소를 더 효율적으로 사용하여 네트워크를 더 잘 관리할 수 있게 되었습니다.  

여기서 서브넷이 도입되었습니다. 서브넷은 큰 네트워크를 여러 개의 작은 네트워크로 분할하는 방법입니다. 주어진 IP 범위 내에서 더 유연하게 네트워크를 구성할 수 있게 되었습니다. 이로 인해 클래스리스 주소 체계(CIDR)의 기반이 되었으며 비효율적인 클래스 개념을 완전히 제거하고 더 유연한 IP 주소 할당 방식을 도입하게 되었습니다.

### 서브넷팅(Subnnetting)

서브넷팅은 서브넷을 생성하고 이용하는 과정을 의미합니다. 큰 네트워크를 더 작은 네트워크로 분할하는 과정이며 목적은 다음과 같습니다.

1. IP 주소 효율성 향상 
    - 큰 네트워크를 작은 단위로 나누어 IP 주소 낭비를 방지합니다.
    - 필요에 따라 IP 주소를 더 효율적으로 할당할 수 있습니다.
2. 네트워크 성능 개선:
    - 브로드캐스트 도메인의 크기를 줄여 네트워크 트래픽을 감소시킵니다.
    - 이는 전체 네트워크의 성능 향상으로 이어집니다.  
3. 보안 강화: 
    - 네트워크를 논리적으로 분리하여 보안성을 높입니다.
    - 각 서브넷에 대한 접근 제어가 용이해집니다.
4. 관리 용이성:
    - 작은 단위의 네트워크로 나누어 관리가 더 쉬워집니다.

> 브로드캐스트 도메인은 네트워크 내에서 브로드캐스트 메시지가 전달될 수 있는 범위를 의미합니다. 동일한 네트워크에 속한 장치들의 집합으로 볼 수 있으며, 브로드캐스트 패킷을 수신하고 응답할 수 있는 영역입니다. 브로드캐스트 도메인 내의 장치들은 서로 직접 통신할 수 있으며 한 컴퓨터가 보낸 메시지는 같은 도메인 안의 모든 컴퓨터에 전달됩니다. 그러나 도메인 외부에는 라우터가 전달하지 않도록 하기 때문에 트래픽을 줄이고 성능을 향상시킬 수 있습니다.
{: .prompt-info }

### 서브넷팅의 주요 개념

1. 서브넷 마스크:
    - IP 주소에서 네트워크 부분과 호스트 부분을 구분하는 역활을 합니다. 
    - 32비트 숫자로 표현되며, 네트워크 크기를 결정합니다.
2. CIDR(Classless Inter-Domain Routin)
    - 더 유연한 IP 주소 할당을 가능하게 하는 방식입니다.
    - IP 주소 뒤에 '/' 기호와 함께 서브넷 마스크 비트 수를 표기합니다.
3. 네트워크 ID와 호스트 ID
    - IP 주소는 네트워크를 식별하는 네트워크 ID와 개별 장치를 식별하는 호스트 ID로 구성됩니다.

서브넷팅을 통해 네트워크 관리자는 주어진 IP 주소 범위를 조직의 요구에 맞게 효율적으로 분배하고 관리할 수 있습니다. 이는 IP 주소 자원의 최적화와 네트워크 성능 향상에 크게 기여합니다.

## NAT란?

NAT(Network Address Translation)는 IP 패킷의 TCP/UDP 포트 숫자와 소스 및 목적지의 IP 주소를 재기록하면서 라우터를 통해 네트워크 트래픽을 주고받는 기술입니다.

### NAT의 목적

NAT는 IP 주소를 절약하고 보안을 강화 목적으로 사용됩니다.  
하나의 공인 IP 주소를 여러 대의 호스트가 공유하여 인터넷에 접속할 수 있게 하기에 IPv4의 주소 부족 문제를 해결하기 위한 방법으로 고안되었습니다.  
또한, 내부 네트워크를 외부 공격으로부터 보호할 수 있습니다. 사설 IP를 사용하는 내부 네트워크 구조를 외부에서 직접 접근하기 어렵게 만듭니다.

### NAT의 동작 방식

![nat.png](https://github.com/Euihyunee/euihyunee.github.io/blob/main/_posts/img/nat.png?raw=true)

1. 내부 네트워크에서는 사설 IP 주소를 사용합니다.
2. 외부 네트워크와 통신할 때 NAT 장비(라우터 등)가 사설 IP를 공인 IP로 변환합니다.
3. NAT 장비는 IP 주소와 포트 번호로 구성된 NAT Forwarding Table을 유지하며, 이를 기반으로 주소 변환을 수행합니다.

### NAT 장단점 

장점:
- 공인 IP 주소 절약
- 내부 네트워크 보안 강화

단점: 
- End-to-End 간 IP 추적이 어려워짐
- 패킷 처리 시 지연 발생 가능성 


## 마치며

개발자가 IP 주소체계, 서브넷팅, NAT에 대해 이해하는 것은 현대 소프트웨어 개발에서 매우 중요합니다. 효율적이고 안정적인 네트워크 통신을 구현하고, 보안을 강화하며, 성능 최적화를 위해 알아야 합니다. 네트워크 관련 문제가 발생했을 때, IP 주소체계와 NAT에 대한 이해는 빠르고 정확한 문제 진단을 할 수 있습니다. 또한 클라우드 컴퓨팅 환경에서 가상 네트워크와 IP 주소 관리가 중요하므로 이에 대한 이해는 필수적입니다.

결론적으로, IP 주소체계, 서브넷팅, NAT에 대한 이해는 단순히 네트워크 관리자의 영역이 아닙니다. 이는 현대 소프트웨어 개발의 핵심 지식이며, 개발자가 더 안전하고, 효율적이며, 확장 가능한 애플리케이션을 만들 수 있게 해줍니다. 또한, 이러한 지식은 개발자가 전체 시스템 아키텍처를 더 잘 이해하고, 다양한 기술적 도전에 대응할 수 있는 능력을 키워줍니다. 따라서 개발자들은 이러한 네트워크 기본 개념들을 꾸준히 학습하고 실제 개발 과정에 적용하는 것이 중요합니다.
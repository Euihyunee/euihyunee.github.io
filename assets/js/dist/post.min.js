/*!
 * Chirpy v6.0.1 (https://github.com/cotes2020/jekyll-theme-chirpy/)
 * Â© 2019 Cotes Chung
 * MIT Licensed
 */
!function(){"use strict";const t=$(".mode-toggle");function e(t,e,o){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var a=o.call(t,e||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}const o=$("body"),a="sidebar-display";class r{static toggle(){!1===r.isExpanded?o.attr(a,""):o.removeAttr(a),r.isExpanded=!r.isExpanded}}e(r,"isExpanded",!1);const n=$("#sidebar-trigger"),s=$("#search-trigger"),l=$("#search-cancel"),i=$("#main>.row"),c=$("#topbar-title"),u=$("#search-wrapper"),p=$("#search-result-wrapper"),d=$("#search-results"),f=$("#search-input"),g=$("#search-hints"),m=$("html,body"),h="loaded",v="unloaded",C="input-focus",b="d-flex";class w{static on(){w.offset=window.scrollY,m.scrollTop(0)}static off(){m.scrollTop(w.offset)}}e(w,"offset",0),e(w,"resultVisible",!1);class y{static on(){n.addClass(v),c.addClass(v),s.addClass(v),u.addClass(b),l.addClass(h)}static off(){l.removeClass(h),u.removeClass(b),n.removeClass(v),c.removeClass(v),s.removeClass(v)}}class S{static on(){w.resultVisible||(w.on(),p.removeClass(v),i.addClass(v),w.resultVisible=!0)}static off(){w.resultVisible&&(d.empty(),g.hasClass(v)&&g.removeClass(v),p.addClass(v),i.removeClass(v),w.off(),f.val(""),w.resultVisible=!1)}}function E(){return l.hasClass(h)}$(".collapse");const T=".code-header>button",x="fas fa-check",_="timeout",P="data-title-succeed",k="data-bs-original-title",K=2e3;function V(t){if($(t)[0].hasAttribute(_)){let e=$(t).attr(_);if(Number(e)>Date.now())return!0}return!1}function Y(t){$(t).attr(_,Date.now()+K)}function A(t){$(t).removeAttr(_)}const F=$(T).children().attr("class");class I{static get attrTimestamp(){return"data-ts"}static get attrDateFormat(){return"data-df"}static get locale(){return $("html").attr("lang").substring(0,2)}static getTimestamp(t){return Number(t.attr(I.attrTimestamp))}static getDateFormat(t){return t.attr(I.attrDateFormat)}}const N=function(){let t=!1;return()=>{let e=t;return t||(t=!0),e}}(),O=function(){function t(t){return $(t).attr("content")}function e(e){let o=t(e);return void 0!==o&&!1!==o}return{getProxyMeta:()=>t("meta[name=pv-proxy-endpoint]"),getLocalMeta:()=>t("meta[name=pv-cache-path]"),hasProxyMeta:()=>e("meta[name=pv-proxy-endpoint]"),hasLocalMeta:()=>e("meta[name=pv-cache-path]")}}(),j=function(){const t={KEY_PV:"pv",KEY_PV_SRC:"pv_src",KEY_CREATION:"pv_created_date"},e="same-origin",o="cors";function a(t){return localStorage.getItem(t)}function r(t,e){localStorage.setItem(t,e)}function n(e,o){r(t.KEY_PV,e),r(t.KEY_PV_SRC,o),r(t.KEY_CREATION,(new Date).toJSON())}return{keysCount:()=>Object.keys(t).length,hasCache:()=>null!==localStorage.getItem(t.KEY_PV),getCache:()=>JSON.parse(localStorage.getItem(t.KEY_PV)),saveLocalCache(t){n(t,e)},saveProxyCache(t){n(t,o)},isExpired(){let e=new Date(a(t.KEY_CREATION));return e.setHours(e.getHours()+1),Date.now()>=e.getTime()},isFromLocal:()=>a(t.KEY_PV_SRC)===e,isFromProxy:()=>a(t.KEY_PV_SRC)===o,newerThan:t=>j.getCache().totalsForAllResults["ga:pageviews"]>t.totalsForAllResults["ga:pageviews"],inspectKeys(){if(localStorage.length===j.keysCount())for(let e=0;e<localStorage.length;e++){switch(localStorage.key(e)){case t.KEY_PV:case t.KEY_PV_SRC:case t.KEY_CREATION:break;default:return void localStorage.clear()}}else localStorage.clear()}}}();function L(t,e,o,a){let r=function(t,e){let o=0;if(void 0!==e)for(let a=0;a<e.length;++a)if(e[parseInt(a,10)][0]===t){o+=parseInt(e[parseInt(a,10)][1],10);break}return o}(e,t);if(r=0===r?1:r,a){const t=parseInt(o.text().replace(/,/g,""),10);r>t&&function(t,e,o){if(t<e){let a=new CountUp(o,t,e);a.error?console.error(a.error):a.start()}}(t,r,o.attr("id"))}else o.text((new Intl.NumberFormat).format(r))}function R(t){if(void 0===t)return;let e=N();const o=t.rows;if($(".post").length>0){L(o,window.location.pathname,$("#pv"),e)}}function D(){O.hasProxyMeta()&&$.ajax({type:"GET",url:O.getProxyMeta(),dataType:"jsonp",success:t=>{R(t),j.saveProxyCache(JSON.stringify(t))},error:(t,e,o)=>{console.log("Failed to load pageviews from proxy server: "+o)}})}function M(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return fetch(O.getLocalMeta()).then((t=>t.json())).then((e=>{t&&j.isFromProxy()&&j.newerThan(e)||(R(e),j.saveLocalCache(JSON.stringify(e)))}))}$(window).on("scroll",(()=>{$(window).scrollTop()>50?$("#back-to-top").fadeIn():$("#back-to-top").fadeOut()})),$("#back-to-top").on("click",(()=>{window.scrollTo(0,0)})),[...document.querySelectorAll('[data-bs-toggle="tooltip"]')].map((t=>new bootstrap.Tooltip(t))),0!==t.length&&t.off().on("click",(t=>{const e=$(t.target);let o=e.prop("tagName")==="button".toUpperCase()?e:e.parent();modeToggle.flipMode(),o.trigger("blur")})),$("#sidebar-trigger").on("click",r.toggle),$("#mask").on("click",r.toggle),s.on("click",(function(){y.on(),S.on(),f.trigger("focus")})),l.on("click",(function(){y.off(),S.off()})),f.on("focus",(function(){u.addClass(C)})),f.on("focusout",(function(){u.removeClass(C)})),f.on("input",(()=>{""===f.val()?E()?g.removeClass(v):S.off():(S.on(),E()&&g.addClass(v))})),$("#core-wrapper img[data-src]")<=0||document.addEventListener("lazyloaded",(function(t){$(t.target).parent().removeClass("shimmer")})),$(".popup")<=0||$(".popup").magnificPopup({type:"image",closeOnContentClick:!0,showCloseBtn:!1,zoom:{enabled:!0,duration:300,easing:"ease-in-out"}}),dayjs.locale(I.locale),dayjs.extend(window.dayjs_plugin_localizedFormat),$("[".concat(I.attrTimestamp,"]")).each((function(){const t=dayjs.unix(I.getTimestamp($(this))),e=t.format(I.getDateFormat($(this)));$(this).text(e),$(this).removeAttr(I.attrTimestamp),$(this).removeAttr(I.attrDateFormat);const o=$(this).attr("data-bs-toggle");if(void 0===o||"tooltip"!==o)return;const a=t.format("llll");$(this).attr("data-bs-title",a),new bootstrap.Tooltip($(this))})),function(){if($(T).length){const t=new ClipboardJS(T,{target:t=>t.parentNode.nextElementSibling.querySelector("code .rouge-code")});[...document.querySelectorAll(T)].map((t=>new bootstrap.Tooltip(t,{placement:"left"}))),t.on("success",(t=>{t.clearSelection();const e=t.trigger;V(e)||(!function(t){$(t).children().attr("class",x)}(e),function(t){const e=$(t).attr(P);$(t).attr(k,e).tooltip("show")}(e),Y(e),setTimeout((()=>{!function(t){$(t).tooltip("hide").removeAttr(k)}(e),function(t){$(t).children().attr("class",F)}(e),A(e)}),K))}))}$("#copy-link").on("click",(t=>{let e=$(t.target);V(e)||navigator.clipboard.writeText(window.location.href).then((()=>{const t=e.attr(k),o=e.attr(P);e.attr(k,o).tooltip("show"),Y(e),setTimeout((()=>{e.attr(k,t),A(e)}),K)}))}))}(),document.querySelector("#core-wrapper h2,#core-wrapper h3")&&tocbot.init({tocSelector:"#toc",contentSelector:".post-content",ignoreSelector:"[data-toc-skip]",headingSelector:"h2, h3",orderedList:!1,scrollSmooth:!1}),$(".pageviews").length<=0||(j.inspectKeys(),j.hasCache()?(R(j.getCache()),j.isExpired()?O.hasLocalMeta()?M(!0).then(D):D():j.isFromLocal()&&D()):O.hasLocalMeta()?M().then(D):D())}();
